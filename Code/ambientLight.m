function [lux night] = ambientLight()% This function reads the value from the photoresistor and returns the variable% 'night', which is used by the driver function to turn on the street lamps% if true and off if false.% Photoresistor connected to FIO6.ULim = 1.0;LLim = 0.07;night = 0;global flickerTimeglobal flickerValue% Read FIO4 voltage[Error lux] = analogRead(6);Error_Message(Error)ft = flickTOC();    if lux < LLim    night = 1; % It's night time.        % Turn on street lights    analogWrite(0,4);        % Flickering fireplace in house.    if ft < flickerTime       analogWrite(1,flickerValue); % Make house LEDs a random percentage of 3.3 volts.    else      ftreset();      flickerTime = rand*2;      flickerValue = rand*3.3;    end    elseif lux > ULim    night = 0; % It's day time.        % Turn off all outdoor lights and house lights    analogWrite(0,0);    analogWrite(1,0);endend