function trafficArray = trafficLights(speed)% Controls the timing for the traffic lights.% Inputs: speed (speed multiplier for pattern)% Outputs: trafficArray (data for lights)% initialize timerglobal gtimerr = [1 0 0];y = [0 1 0];g = [0 0 1];b = [0 0 0];t = toc(gtimer)*speed; % Multiple time by speed.% [TurnLaneA, TurnLaneC] = turnLane(); % Read Turn Lane Inputs% Traffic Signal Timingif t < 15%    if TurnLaneC == 1%        trafficArray = [r r g g r];%        shiftOut(trafficArray);%    else        trafficArray = [r r r g r];        shiftOut(trafficArray);%    endelseif t >= 15 && t < 21%    if TurnLaneC == 1%        trafficArray = [r r y y r];%        shiftOut(trafficArray);%    else        trafficArray = [r r r y r];        shiftOut(trafficArray);%    endelseif t >= 21 && t < 27%    TurnLaneC = 0;%    if TurnLaneA == 1%        trafficArray = [g g r r r];%        shiftOut(trafficArray);%    else        trafficArray = [r g r r g];        shiftOut(trafficArray);%    endelseif t >= 27 && t < 32%    if TurnLaneA == 1%        trafficArray = [y g r r r];%        shiftOut(trafficArray);%    else        trafficArray = [r g r r g];        shiftOut(trafficArray);%    endelseif t >= 32 && t < 45    TurnLaneA = 0;    trafficArray = [r g r r g];    shiftOut(trafficArray);elseif t >= 45 && t < 50    trafficArray = [r y r r y];    shiftOut(trafficArray);else    trafficArray = [b b b b b]    gtreset() % If greater than 50, it  resets the time.endfunction [TurnLaneA, TurnLaneC] = turnLane()% This is a nested function which will read the Hall Effect sensors% to sense if a car is present at the turn lane.% Inputs: None% Outputs: [TurnLaneA, TurnLaneC]if t < 0.01TurnLaneC = 0; % digitalRead(12);elseif 20.99 < t < 21TurnLaneA = 0; % digitalRead(11);else    [TurnLaneA, TurnLaneC] = 0;endendend %End of full function